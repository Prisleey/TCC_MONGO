<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Colorlib">
    <meta name="description" content="#">
    <meta name="keywords" content="#">
    <!-- Favicons -->
    <link rel="shortcut icon" href="#">
    <!-- Page Title -->
    <title>Detalhe Sala</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,500,700,900" rel="stylesheet">
    <!-- Simple line Icon -->
    <link rel="stylesheet" href="css/simple-line-icons.css">
    <!-- Themify Icon -->
    <link rel="stylesheet" href="css/themify-icons.css">
    <!-- Hover Effects -->
    <link rel="stylesheet" href="css/set1.css">
    <!-- Swipper Slider -->
    <link rel="stylesheet" href="css/swiper.min.css">
    <!-- Magnific Popup CSS -->
    <link rel="stylesheet" href="css/magnific-popup.css">
    <!-- Main CSS -->
    <link rel="stylesheet" href="css/style.css">
	<!-- DATE RANGE PICKER CSS -->
	<link rel="stylesheet" href="css/daterangepicker.css">
	
	
</head>

<body>
    <!--============================= HEADER =============================-->
    <div class="dark-bg sticky-top">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <nav class="navbar navbar-expand-lg navbar-light">
                            <a class="navbar-brand" href="/">Portal Música</a>
                            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" 	aria-label="Toggle navigation">
                            <span class="icon-menu"></span>
                            </button>
                            <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
                                <ul class="navbar-nav">
                                    <li class="nav-item active">
                                        <a class="nav-link" href="cadastro-estudio">Cadastrar Estúdio</a>
                                    </li>
                                    <li class="nav-item active">
                                        <a class="nav-link" href="cadastro-sala">Cadastrar Sala</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="agenda">Agenda</a>
                                    </li>
                                    <li>
                                        <a href="/" id='btLogin' class="btn btn-outline-light top-btn" data-toggle="modal" data-target="#login-modal" > Logoff</a>
                                    </li>
                                </ul>
                            </div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    <!--//END HEADER -->
    <!--============================= BOOKING =============================-->
	<div>
        <!-- Swiper -->
        <div class="swiper-container">
            <div class="swiper-wrapper">

                <!-- <div class="swiper-slide">
                    <a href="images/reserve-slide2.jpg" class="grid image-link">
                        <img src="images/reserve-slide2.jpg" class="img-fluid" alt="#">
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="images/reserve-slide1.jpg" class="grid image-link">
                        <img src="images/reserve-slide1.jpg" class="img-fluid" alt="#">
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="images/reserve-slide3.jpg" class="grid image-link">
                        <img src="images/reserve-slide3.jpg" class="img-fluid" alt="#">
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="images/reserve-slide1.jpg" class="grid image-link">
                        <img src="images/reserve-slide1.jpg" class="img-fluid" alt="#">
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="images/reserve-slide2.jpg" class="grid image-link">
                        <img src="images/reserve-slide2.jpg" class="img-fluid" alt="#">
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="images/reserve-slide3.jpg" class="grid image-link">
                        <img src="images/reserve-slide3.jpg" class="img-fluid" alt="#">
                    </a>
                </div> -->
            </div>
            <!-- Add Pagination -->
            <div class="swiper-pagination swiper-pagination-white"></div>
            <!-- Add Arrows -->
            <div class="swiper-button-next swiper-button-white"></div>
            <div class="swiper-button-prev swiper-button-white"></div>
        </div>
    </div>

    <!--//END BOOKING -->
    <!--============================= RESERVE A SEAT =============================-->
    <section class="reserve-block">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <% if(estudio.length > 0 && sala.length > 0) { %>
                        <h5><%= estudio[0].nomeEstudio%>: <%= sala[0].nome_sala %></h5><br>
                    <% } %>
                    <p class="reserve-description">Veja os detalhes da sala e agende o serviço desejado.</p>
                </div>
        </div>
    </section>
    <!--//END RESERVE A SEAT -->
    <!--============================= BOOKING DETAILS =============================-->
    <section class="light-bg booking-details_wrap">
        <div class="container">
            <div class="row">
                <div class="col-md-12 responsive-wrap">
					<!-- DESCROCAO E CHECKBOX -->
                    <div class="booking-checkbox_wrap">	
						<div>	
							<p style='font-size:25px; font-weight:bold'>Equipamentos:</p>
							<!-- gerado pelo banco de dados -->
							<ul class="list-group">
							<%
								var equipamentosSala = sala[0].equipamento.split(",");
                                console.log("FOI TESTE");
                                
								console.log(equipamentosSala);
								if(equipamentosSala.length > 0){
									for(var i = 0; i < equipamentosSala.length; i++){
									
							%>
							
							  <li class="list-group-item"><%= equipamentosSala[i]%></li>
							 <%
									}
								}
							%>
							</ul>
							<hr/>
						</div>
						<br>
						<form action='/detalhe-sala' id='formAgendar' method='post'>
						
							<!-- GAMBIARRA DA BRABA, SE PENSAR EM UMA MANEIRA MELHOR, PODE MUDAR (pegando os IDS para inserir depois no agendamento) -->
							<input name='id_estudio' type='hidden' value='<%=sala[0].id_estudio%>' />
							<input name='id_sala' type='hidden' value='<%=sala[0].id_sala%>' />
							<input name='descricao' type='hidden' value='<%=servico[0].nome%>' />
							<input name='id_servico' type='hidden' value='<%=servico[0].id_servico%>' />
							<input name='id_musico' type='hidden' value='1' />
							
							<div class="col-5">
								<label for="dataAgendamento">Data Agendamento</label>
								<input class="form-control" id="dataAgendamento" name='data_agendamento' type="text">
							</div>
							</br>
							<hr>
							<div class="col-5">
							<p style='font-size:25px; font-weight:bold'>Horários Agendamento:</p>
							<!-- Ao selecionar a data, dispara o evento que gera as checkboxes de horário, de acordo com os horários disponiveis -->
							<!--
							<div class="form-check">
							  <label class="form-check-label">
								<input type="checkbox" class="form-check-input" name='hora1' id='hora1' value="10:00-11:00"> 10:00 - 11:00
							  </label>
							</div>
							<div class="form-check">
							  <label class="form-check-label">
								<input type="checkbox" class="form-check-input" name='hora1' id='hora1' value="11:00-12:00"> 11:00 - 12:00
							  </label>
							</div>
							<div class="form-check">
							  <label class="form-check-label">
								<input type="checkbox" class="form-check-input" name='hora1' id='hora1' value="12:00-13:00"> 12:00 - 13:00
							  </label>
							</div>
							<div class="form-check">
							  <label class="form-check-label">
								<input type="checkbox" class="form-check-input" name='hora1' id='hora1' value="13:00-14:00"> 13:00 - 14:00
							  </label>
							</div>
							-->
							<input type="text" class="form-control" id="horarioFuncionamento" name='horarioFuncionamento' placeholder="" readonly required>
							</div>
                            <br/>
                            <hr>
							<button type="submit" class="btn btn-primary">Agendar</button>
						</form>
                    </div>
					<!-- END //DESCROCAO E CHECKBOX -->
                </div>
            </div>
        </div>
    </section>
    <!--//END BOOKING DETAILS -->
    <!--============================= FOOTER =============================-->
    <footer class="main-block dark-bg">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="copyright">
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        <p>Copyright &copy; 2018 Listing. All rights reserved </p>
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        <ul>
                            <li><a href="#"><span class="ti-facebook"></span></a></li>
                            <li><a href="#"><span class="ti-twitter-alt"></span></a></li>
                            <li><a href="#"><span class="ti-instagram"></span></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--//END FOOTER -->
	
    <!-- jQuery, Bootstrap JS. -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="js/jquery-3.2.1.min.js"></script>
	<script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <!-- Magnific popup JS -->
    <script src="js/jquery.magnific-popup.js"></script>
	
    <!-- Swipper Slider JS -->
    <script src="js/swiper.min.js"></script>
	 
	 <!-- DATE RANGE PICKER JS -->
	<script src="js/moment.js"></script>
	<script src="js/daterangepicker.js"></script>
    <script>
        var swiper = new Swiper('.swiper-container', {
            slidesPerView: 3,
            slidesPerGroup: 3,
            loop: true,
            loopFillGroupWithBlank: true,
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
        });
    </script>
    <script>
        if ($('.image-link').length) {
            $('.image-link').magnificPopup({
                type: 'image',
                gallery: {
                    enabled: true
                }
            });
        }
        if ($('.image-link2').length) {
            $('.image-link2').magnificPopup({
                type: 'image',
                gallery: {
                    enabled: true
                }
            });
        }
    </script>
	<script>
		$(document).ready(function(){
			$("#dataAgendamento").daterangepicker({
				timePicker: false,
				singleDatePicker: true,
				//startDate: moment().startOf('hour'),
				//endDate: moment().startOf('hour').add(32, 'hour'),
				locale: {
                    format: 'DD/MM/YYYY',
                    cancelLabel: 'Clear'
				}
			});
			//$(".calendar-table").hide();
			//$("#horarioFuncionamento").on('focus', function() {
			//	$(".calendar-table").hide();
			//});
			$("#horarioFuncionamento").daterangepicker({
                timePicker: true,
                timePicker24Hour: true,
                //startDate: moment().startOf('hour'),
                //endDate: moment().startOf('hour').add(32, 'hour'),
                locale: {
                    format: 'hh:mm A',
                    cancelLabel: 'Clear'
                }
            });

            $("#horarioFuncionamento").on('focus', function () {
                $(".calendar-table").eq(2).hide();
                $(".calendar-table").eq(3).hide();
            });

            // $("#horaroFuncionamento.calendar-table").hide();
            // $("#horarioFuncionamento").on('focus', function() {
            //     $("#horaroFuncionamento.calendar-table").hide();
            // });
            // $("#horarioFuncionamento").val("");
				
			//SUBMIT	
			$("#formAgendar").on("submit", function(e){
			
				
				var hora_inicio = $("#horarioFuncionamento").val().split("-")[0].trim();
				var hora_fim = $("#horarioFuncionamento").val().split("-")[1].trim();
				
				console.log("inicio "+hora_inicio);
				console.log("fim" + hora_fim);
				
				$("#horarioFuncionamento").prop("disabled", true);
				
				// alert("tentou submitar: " + $("#horarioFuncionamento").prop("disabled"));
				
				//https://stackoverflow.com/questions/17809056/how-to-add-additional-fields-to-form-before-submit
				$('<input />').attr('type', 'hidden')
				  .attr('name', "hora_inicio")
				  .attr('value', hora_inicio)
				  .appendTo('#formAgendar');
				  
				  $('<input />').attr('type', 'hidden')
				  .attr('name', "hora_fim")
				  .attr('value', hora_fim)
				  .appendTo('#formAgendar');
				  
				  console.log($("#formAgendar"));
				  
				  return true;
				  
			});
		});
	</script>
	<!--
	<script>
		function updateConfig(id, dtMin, dtMax) {

			var options = {};
			options.timePicker = true;
			options.timePicker24Hour = true;
			options.autoApply = true;
			options.locale = {
				direction : $('#rtl').is(':checked') ? 'rtl' : 'ltr',
				format : 'DD/MM/YYYY HH:mm',
				separator : ' - ',
				applyLabel : 'Aplicar',
				cancelLabel : 'Cancelar',
				fromLabel : 'De',
				toLabel : 'Para',
				customRangeLabel : 'Customizar',
				daysOfWeek : [ 'Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sab' ],
				monthNames : [ 'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro' ],
				firstDay : 1
			}
			options.linkedCalendars = false;
			options.autoUpdateInput = true;
			options.alwaysShowCalendars = true;
			options.startDate = dtMin;
			options.endDate = dtMax;
			options.minDate = dtMin;
			options.maxDate = dtMax;
			options.opens = 'center';
			options.buttonClasses = 'btn btn-sm';
			options.applyClass = 'btn-success';
			options.cancelClass = 'btn-default';

			$(id).daterangepicker(options, function(start, end, label) {
				console.log("Entrou!!!");
				var datainicio = start.format('DD/MM/YYYY');
				var datafim = end.format('DD/MM/YYYY');
				console.log(datainicio);
				console.log(datafim);
			});
		}
	</script>
-->
</body>

</html>
